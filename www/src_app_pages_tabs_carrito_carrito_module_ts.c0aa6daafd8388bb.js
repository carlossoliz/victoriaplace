"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["src_app_pages_tabs_carrito_carrito_module_ts"],{1863:(T,g,c)=>{c.r(g),c.d(g,{CarritoPageModule:()=>Z});var p=c(6895),h=c(433),r=c(2346),m=c(1407),C=c(9671),d=c(6052),t=c(8256),P=c(8934),f=c(9647),b=c(8334);function _(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-thumbnail",1),t._UZ(3,"img",10),t.qZA(),t.TgZ(4,"ion-toolbar")(5,"ion-buttons",11)(6,"ion-button",2),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.cantidad(i,!0))}),t._UZ(7,"ion-icon",12),t.qZA(),t.TgZ(8,"ion-button",2),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.cantidad(i,!1))}),t._UZ(9,"ion-icon",13),t.qZA()(),t.TgZ(10,"ion-label",2),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.modal(i))}),t.TgZ(11,"ion-label",14),t._uU(12),t.qZA(),t.TgZ(13,"p",14),t._uU(14),t.qZA(),t.TgZ(15,"p",14),t._uU(16),t.qZA()(),t.TgZ(17,"ion-buttons",15)(18,"ion-button",2),t.NdJ("click",function(){const i=t.CHM(o).$implicit,s=t.oxw();return t.KtG(s.eliminar(i))}),t._UZ(19,"ion-icon",16),t.qZA()()()()()}if(2&e){const o=l.$implicit,a=t.oxw();t.xp6(3),t.Q6J("src",a.rutas.apiUrl+"ServicioAux/GetImageRest3?CarpetaCod=4&ImagenCod="+o.producto.ProductoCod+".jpg",t.LSH),t.xp6(9),t.Oqu(o.producto.ProductoNombre),t.xp6(2),t.hij("Cantidad : ",o.cantidad,""),t.xp6(2),t.hij("",o.precio,"bs")}}const x=[{path:"",component:(()=>{class e{constructor(o,a,n,i,s,u){this.router=o,this.alertController=a,this.nav=n,this.socialSharing=i,this.servicio=s,this.rutas=u,this.url="https://wa.me/+59172154177?text=",this.total=0,this.descripcion="pedido"}ngOnInit(){d.K.get({key:"carrito"}).then(o=>{null!=o&&null!=o.value&&(this.lista=JSON.parse(o.value).filter(a=>0==a.estado)[0].lista,this.sumaTotal())})}sumaTotal(){this.total=this.lista.map(o=>Number(o.cantidad)*Number(o.precio)).reduce((o,a)=>o+a,0)}compartir(){let o=this.lista.map(a=>"Codigo : ".concat(a.producto.ProductoCod).concat("\n").concat("Producto : ").concat(a.producto.ProductoNombre).concat("\n").concat("Cant : ").concat(a.cantidad).concat(" x ").concat("Precio : ").concat(a.precio).concat(" = ").concat((Number(a.cantidad)*Number(a.precio)).toFixed(2).toString()));this.guardarPedido(),this.socialSharing.share(o.join("\n\n").concat("\n\nTotal : ").concat(this.total.toString().concat(" Bs")),"",null,null).then(a=>{})}back(){this.nav.back()}cantidad(o,a){o.cantidad=a?1==o.cantidad?1:o.cantidad-1:o.cantidad+1,this.actualizarBolsa(),this.sumaTotal()}eliminar(o){this.lista=this.lista.filter(a=>a.producto.ProductoId!=o.producto.ProductoId),this.actualizarBolsa(),this.sumaTotal()}actualizarBolsa(){d.K.get({key:"carrito"}).then(o=>{let a=null==o.value?[]:JSON.parse(o.value),n=0==a.length?[]:a.filter(u=>0==u.estado)[0].lista,i=a.indexOf(a.filter(u=>0==u.estado)[0]);n=this.lista;let s={estado:!1,lista:n};-1==i?(a.push(s),d.K.set({key:"carrito",value:JSON.stringify(a)})):(a[i]=s,d.K.set({key:"carrito",value:JSON.stringify(a)}))})}getUrl(){let o=this.lista.map(a=>"Codigo : ".concat(a.producto.ProductoCod).concat("%0A").concat("Grupo : ").concat(a.producto.GrupoDes).concat("%0A").concat("Producto : ").concat(a.producto.ProductoNombre).concat("%0A").concat("Cant : ").concat(a.cantidad).concat(" x ").concat("Precio : ").concat(a.precio).concat(" = ").concat((Number(a.cantidad)*Number(a.precio)).toFixed(2).toString()));o.join("%0A%0A").concat("%0A%0ATotal : ").concat(this.total.toString().concat(" Bs")),this.guardarPedido(),window.open(this.url.concat(o.join("%0A%0A").concat("%0A%0ATotal : ").concat(this.total.toString().concat(" Bs"))),"_system","location=yes")}guardarPedido(){let o=this.lista.map(n=>({PedVentaId:5,PedVentaDetDes:"C",ProductoId:n.producto.ProductoId,MedidaId:n.producto.MedidaId,Precio:Number(n.precio).toFixed(5),PrecioDesct:0,Cantidad:n.cantidad,Importe:Number(Number(n.cantidad)*Number(n.precio)).toFixed(5),EstadoId:1})),a={Cmd:[2,0,0,0],Datos:{EmpresaId:this.rutas.EmpresaId,Model:{EmpresaId:this.rutas.EmpresaId,PedVentaNro:3,Fecha:this.get(new Date),ClienteId:1,ClienteCod:"CL001",ClienteDes:"cliente",EmpleadoId:1,GestionId:1,AlmacenId:1,AlmacenDes:"ALMACEN CENTRAL",PedVentaDes:this.descripcion,PedVentaMonto:Number(this.total).toFixed(5),Latitud:17.4654654,Longitud:63.54656123,EstadoId:1},ModelDet:o}};console.log("===================================="),console.log(JSON.stringify(a)),console.log("===================================="),this.servicio.post(this.rutas.pedido,a).then(n=>{console.log("===================================="),console.log(n),console.log("===================================="),d.K.remove({key:"carrito"}),this.rutas.cantidadCarrito=0,this.router.navigateByUrl("/tabs",{replaceUrl:!0})})}modal(o){this.presentAlert(o)}get(o){let a=o.getFullYear();return(1+o.getMonth()).toString().padStart(2,"0")+"/"+o.getDate().toString().padStart(2,"0")+"/"+a}presentAlert(o){var a=this;return(0,C.Z)(function*(){yield(yield a.alertController.create({header:"Ingrese una Cantidad",buttons:[{text:"Cambiar",handler:i=>{o.cantidad=Number(i.cantidad)>0?Number(i.cantidad):1,a.actualizarBolsa(),a.sumaTotal()}}],inputs:[{name:"cantidad",type:"number",placeholder:"cantidad",min:1,max:999999}]})).present()})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.F0),t.Y36(r.Br),t.Y36(r.SH),t.Y36(P.e),t.Y36(f.l),t.Y36(b.R))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-carrito"]],decls:19,vars:4,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"titulo"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["expand","block","shape","round",3,"click"],["slot","start","name","logo-whatsapp"],["slot","secondary"],[1,"img",3,"src"],["slot","primary"],["size","small","slot","end","color","primary","name","remove-circle"],["size","small","slot","end","color","primary","name","add-circle"],[1,"tx"],["slot","end"],["size","small","slot","end","color","primary","name","trash-outline"]],template:function(o,a){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return a.back()}),t._UZ(4,"ion-icon",3),t.qZA()(),t.TgZ(5,"ion-title",4),t._uU(6,"Bolsa"),t.qZA()()(),t.TgZ(7,"ion-content",5),t.YNc(8,_,20,4,"ion-list",6),t.TgZ(9,"ion-button",7),t.NdJ("click",function(){return a.getUrl()}),t._uU(10," Enviar a Whatsapp"),t._UZ(11,"ion-icon",8),t.qZA()(),t.TgZ(12,"ion-footer",5)(13,"ion-toolbar")(14,"ion-title"),t._uU(15,"Total"),t.qZA(),t.TgZ(16,"ion-label",9),t._uU(17),t.ALo(18,"number"),t.qZA()()()),2&o&&(t.xp6(8),t.Q6J("ngForOf",a.lista),t.xp6(9),t.hij("",t.lcZ(18,2,a.total)," BS"))},dependencies:[p.sg,r.YG,r.Sm,r.W2,r.fr,r.Gu,r.gu,r.Ie,r.Q$,r.q_,r.Bs,r.wd,r.sr,p.JJ],styles:[".md[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{text-align:center}.tx[_ngcontent-%COMP%]{white-space:initial;font-size:small;font-family:BentonSans Medium;src:url(/assets/Fuentes/BentonSans\\ Medium.otf)}.img[_ngcontent-%COMP%]{object-fit:resize;height:100%;width:auto!important;border:0;padding:0}"]}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(x),m.Bz]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,h.u5,r.Pc,A]}),e})()}}]);