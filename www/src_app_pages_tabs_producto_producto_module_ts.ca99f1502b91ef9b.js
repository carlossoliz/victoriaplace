"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["src_app_pages_tabs_producto_producto_module_ts"],{1855:(U,m,c)=>{c.r(m),c.d(m,{ProductoPageModule:()=>M});var u=c(6895),g=c(433),r=c(2346),p=c(1407),h=c(9671),d=c(6052),t=c(8256),f=c(9645),Z=c(9647),x=c(8334);function P(e,s){if(1&e&&(t.TgZ(0,"ion-badge",16),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Oqu(o.rutas.cantidadCarrito)}}function b(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"ion-buttons",4)(1,"ion-button",2),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.escanear())}),t._UZ(2,"ion-icon",17),t.qZA()()}}function v(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"ion-toolbar")(1,"ion-searchbar",18),t.NdJ("ionInput",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.busqueda(n))}),t.qZA()()}}function T(e,s){1&e&&(t.TgZ(0,"div")(1,"ion-accordion-group",19)(2,"ion-accordion",20)(3,"ion-item",21),t._UZ(4,"ion-skeleton-text",22),t.qZA(),t.TgZ(5,"div",23)(6,"ion-list")(7,"ion-item"),t._UZ(8,"ion-skeleton-text",24),t.qZA()()()(),t.TgZ(9,"ion-accordion",20)(10,"ion-item",21),t._UZ(11,"ion-skeleton-text",22),t.qZA(),t.TgZ(12,"div",23)(13,"ion-list")(14,"ion-item"),t._UZ(15,"ion-skeleton-text",24),t.qZA()()()(),t.TgZ(16,"ion-accordion",20)(17,"ion-item",21),t._UZ(18,"ion-skeleton-text",22),t.qZA(),t.TgZ(19,"div",23)(20,"ion-list")(21,"ion-item"),t._UZ(22,"ion-skeleton-text",24),t.qZA()()()(),t.TgZ(23,"ion-accordion",20)(24,"ion-item",21),t._UZ(25,"ion-skeleton-text",22),t.qZA(),t.TgZ(26,"div",23)(27,"ion-list")(28,"ion-item"),t._UZ(29,"ion-skeleton-text",24),t.qZA()()()(),t.TgZ(30,"ion-accordion",20)(31,"ion-item",21),t._UZ(32,"ion-skeleton-text",22),t.qZA(),t.TgZ(33,"div",23)(34,"ion-list")(35,"ion-item"),t._UZ(36,"ion-skeleton-text",24),t.qZA()()()(),t.TgZ(37,"ion-accordion",20)(38,"ion-item",21),t._UZ(39,"ion-skeleton-text",22),t.qZA(),t.TgZ(40,"div",23)(41,"ion-list")(42,"ion-item"),t._UZ(43,"ion-skeleton-text",24),t.qZA()()()(),t.TgZ(44,"ion-accordion",20)(45,"ion-item",21),t._UZ(46,"ion-skeleton-text",22),t.qZA(),t.TgZ(47,"div",23)(48,"ion-list")(49,"ion-item"),t._UZ(50,"ion-skeleton-text",24),t.qZA()()()()()()),2&e&&(t.xp6(4),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0),t.xp6(3),t.Q6J("animated",!0),t.xp6(4),t.Q6J("animated",!0))}function C(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"ion-list")(1,"ion-item",27),t.NdJ("click",function(){const a=t.CHM(o).$implicit,l=t.oxw().$implicit,_=t.oxw(3);return t.KtG(_.listaProductos(a.GrupoId,l.LineaId))}),t.TgZ(2,"ion-label"),t._uU(3),t.qZA()()()}if(2&e){const o=s.$implicit;t.xp6(3),t.Oqu(o.GrupoDes)}}function J(e,s){if(1&e&&(t.TgZ(0,"ion-accordion-group",19)(1,"ion-accordion",20)(2,"ion-item",21)(3,"ion-label"),t._uU(4),t.qZA()(),t.TgZ(5,"div",23),t.YNc(6,C,4,1,"ion-list",26),t.qZA()()()),2&e){const o=s.$implicit;t.xp6(4),t.Oqu(o.LineaDes),t.xp6(2),t.Q6J("ngForOf",o.Grupo)}}function A(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,J,7,2,"ion-accordion-group",25),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.linea)}}function q(e,s){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,T,51,14,"div",11),t.YNc(2,A,2,1,"div",11),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.cargar),t.xp6(1),t.Q6J("ngIf",!o.cargar)}}function I(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"ion-list")(1,"ion-item",27),t.NdJ("click",function(){const a=t.CHM(o).$implicit,l=t.oxw(2);return t.KtG(l.verDetalle(a))}),t.TgZ(2,"ion-thumbnail",1),t._UZ(3,"img",31),t.qZA(),t.TgZ(4,"ion-label")(5,"ion-label"),t._uU(6),t.qZA(),t.TgZ(7,"h3"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.qZA()()()()}if(2&e){const o=s.$implicit,i=t.oxw(2);t.xp6(3),t.Q6J("src",i.rutas.apiUrl+"ServicioAux/GetImageRest3?CarpetaCod=4&ImagenCod="+o.ProductoCod+".jpg",t.LSH),t.xp6(3),t.Oqu(o.ProductoNombre),t.xp6(2),t.Oqu(o.GrupoDes),t.xp6(2),t.Oqu(o.LineaDes)}}function y(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",28),t.YNc(1,I,11,4,"ion-list",26),t.TgZ(2,"ion-infinite-scroll",29),t.NdJ("ionInfinite",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.loadData(n))}),t._UZ(3,"ion-infinite-scroll-content",30),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.busquedas)}}const k=[{path:"",component:(()=>{class e{constructor(o,i,n,a,l,_,Q){this.nav=o,this.platform=i,this.router=n,this.barcodeScanner=a,this.servicio=l,this.rutas=_,this.alertaControler=Q,this.ventanas=0,this.buscador=0,this.limite=50,this.cargar=!0,this.carritocat=0,this.count=0,this.platform.backButton.subscribeWithPriority(10,()=>{"/tabs/producto"==this.router.url||"/tabs/favorito"==this.router.url||"/tabs/pedido"==this.router.url||"/tabs/cliente"==this.router.url||o.back()})}onClick(){this.count++,setTimeout(()=>{this.count>5&&(this.count=0,this.mostrarAlerta())},250)}mostrarAlerta(){var o=this;return(0,h.Z)(function*(){yield(yield o.alertaControler.create({header:"Cambiar Datos",buttons:[{text:"Cancel",role:"cancel",handler:n=>{console.log("Cancel clicked.")}},{text:"Guardar",handler:n=>{""!=n.url&&""!=n.empresa?(d.K.remove({key:"carrito"}),d.K.remove({key:"favorito"}),d.K.set({key:"urlempesa",value:JSON.stringify({url:n.url,empresa:n.empresa})}),window.location.reload()):o.presentAlert()}}],inputs:[{name:"url",type:"text",placeholder:"https://localhost:8081"},{name:"empresa",placeholder:"id de empresa",type:"number"}]})).present()})()}presentAlert(){var o=this;return(0,h.Z)(function*(){yield(yield o.alertaControler.create({header:"Alerta",subHeader:"Important message",message:"Datos Vacios!",buttons:["OK"]})).present()})()}ngOnInit(){d.K.get({key:"carrito"}).then(i=>{let n=null==i.value?[]:JSON.parse(i.value),a=0==n.length?[]:n.filter(l=>0==l.estado)[0].lista;this.rutas.cantidadCarrito=a.length}),this.servicio.post(this.rutas.producto,{Cmd:[1,2,2,0],Datos:{EmpresaId:this.rutas.EmpresaId,EstadoId:1}}).then(i=>{this.producto=i.Datos,this.linea=Array.from(new Set(i.Datos.map(n=>n.LineaId))).map(n=>({LineaId:n,LineaDes:i.Datos.find(a=>a.LineaId==n).LineaDes,Grupo:Array.from(new Set(i.Datos.filter(a=>a.LineaId==n).map(a=>a.GrupoId))).map(a=>({GrupoId:a,GrupoDes:i.Datos.find(l=>l.GrupoId==a).GrupoDes}))})),this.busquedas=this.producto.slice(0,this.limite),this.cargar=!1})}listaProductos(o,i){let n=this.producto.filter(a=>a.GrupoId==o&&a.LineaId==i);this.router.navigate(["/producto-lista"],{queryParams:{lista:JSON.stringify(n)}})}habilitarBuscador(o){this.buscador=o}deslizar(o){o.startAutoplay()}busqueda(o){this.busquedas=this.producto.filter(i=>i.ProductoNombre.toLowerCase().indexOf(o.target.value.toLowerCase())>-1)}verDetalle(o){this.servicio.post(this.rutas.productoDetalle,{Cmd:[1,3,2,0],Datos:{EmpresaId:this.rutas.EmpresaId,ProductoId:o.ProductoId}}).then(n=>{this.router.navigate(["/producto-detalle"],{queryParams:{producto:JSON.stringify(o),detalle:JSON.stringify(n.Datos[0])}})})}escanear(){this.barcodeScanner.scan().then(o=>{this.busquedas=this.producto.filter(i=>i.ProductoCBar.indexOf(o.text)>-1)}).catch(o=>{console.log("Error",o)})}carrito(){this.router.navigate(["/carrito"])}loadData(o){setTimeout(()=>{this.limite+=50,this.busquedas=this.producto.slice(0,this.limite),o.target.complete(),this.busquedas.length>=this.producto.length&&(o.target.disabled=!0)},500)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.SH),t.Y36(r.t4),t.Y36(p.F0),t.Y36(f.m),t.Y36(Z.l),t.Y36(x.R),t.Y36(r.Br))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-producto"]],decls:24,vars:9,consts:[["color","primary"],["slot","start"],[3,"click"],[1,"titulo"],["slot","secondary"],["class","badge","color","medium",4,"ngIf"],["slot","icon-only","name","cart"],["slot","secondary",4,"ngIf"],[3,"ngModel","ngModelChange"],["value","0",3,"click"],["value","1",3,"click"],[4,"ngIf"],[3,"fullscreen"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","ion-padding",4,"ngSwitchCase"],["color","medium",1,"badge"],["slot","icon-only","name","barcode-outline"],[3,"ionInput"],["expand","inset"],["value","first"],["slot","header","color","light"],[3,"animated"],["slot","content"],[2,"width","80%",3,"animated"],["expand","inset",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["button","",3,"click"],[1,"ion-padding"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando mas datos..."],[1,"img",3,"src"]],template:function(o,i){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return i.onClick()}),t.qZA()(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",4)(7,"ion-button",2),t.NdJ("click",function(){return i.carrito()}),t.YNc(8,P,2,1,"ion-badge",5),t._UZ(9,"ion-icon",6),t.qZA()(),t.YNc(10,b,3,0,"ion-buttons",7),t.qZA(),t.TgZ(11,"ion-toolbar")(12,"ion-segment",8),t.NdJ("ngModelChange",function(a){return i.ventanas=a}),t.TgZ(13,"ion-segment-button",9),t.NdJ("click",function(){return i.habilitarBuscador(0)}),t.TgZ(14,"ion-label"),t._uU(15,"Lineas"),t.qZA()(),t.TgZ(16,"ion-segment-button",10),t.NdJ("click",function(){return i.habilitarBuscador(1)}),t.TgZ(17,"ion-label"),t._uU(18,"Todos"),t.qZA()()(),t.YNc(19,v,2,0,"ion-toolbar",11),t.qZA()(),t.TgZ(20,"ion-content",12)(21,"div",13),t.YNc(22,q,3,2,"div",14),t.YNc(23,y,4,1,"div",15),t.qZA()()),2&o&&(t.xp6(5),t.Oqu(i.rutas.TituloEmpresa),t.xp6(3),t.Q6J("ngIf",i.rutas.cantidadCarrito>0),t.xp6(2),t.Q6J("ngIf",1==i.buscador),t.xp6(2),t.Q6J("ngModel",i.ventanas),t.xp6(7),t.Q6J("ngIf",1==i.buscador),t.xp6(1),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngSwitch",i.ventanas),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1))},dependencies:[u.sg,u.O5,u.RF,u.n9,g.JJ,g.On,r.We,r.eh,r.yp,r.YG,r.Sm,r.W2,r.Gu,r.gu,r.ju,r.MB,r.Ie,r.Q$,r.q_,r.VI,r.cJ,r.GO,r.CK,r.Bs,r.wd,r.sr,r.QI,r.j9],styles:['.img-wrapper[_ngcontent-%COMP%]{min-height:300px;width:100%;background-size:cover;background-repeat:no-repeat}.round[_ngcontent-%COMP%]{border-radius:15px}.md[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{text-align:center;size:20;font-family:Perpetua Titling MT Std Light;src:url("/assets/Fuentes/Perpetua Titling MT Std Light.otf")}ion-searchbar[_ngcontent-%COMP%]{--icon-color: var(--ion-color-primary)}.img[_ngcontent-%COMP%]{object-fit:resize;height:100%;width:auto!important;border:0;padding:0}.badge[_ngcontent-%COMP%]{position:absolute;top:-.3rem;right:-.3rem;opacity:1}.tx[_ngcontent-%COMP%]{font-family:BentonSans Medium;src:url(/assets/Fuentes/BentonSans\\ Medium.otf)}']}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.Bz.forChild(k),p.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,g.u5,r.Pc,O]}),e})()}}]);